var S=Object.defineProperty,x=Object.defineProperties;var k=Object.getOwnPropertyDescriptors;var m=Object.getOwnPropertySymbols;var g=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable;var E=(e,t,u)=>t in e?S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:u}):e[t]=u,l=(e,t)=>{for(var u in t||(t={}))g.call(t,u)&&E(e,u,t[u]);if(m)for(var u of m(t))h.call(t,u)&&E(e,u,t[u]);return e},f=(e,t)=>x(e,k(t));var F=(e,t)=>{var u={};for(var r in e)g.call(e,r)&&t.indexOf(r)<0&&(u[r]=e[r]);if(e!=null&&m)for(var r of m(e))t.indexOf(r)<0&&h.call(e,r)&&(u[r]=e[r]);return u};import{d as T}from"./index.262ad20e.js";import{a as w,b as c}from"./hoc.bd850057.js";import{j as v}from"./index.0420ae1d.js";import"./vendor.96977194.js";import"./index.9a4254e7.js";import"./p9dlhpru.1263e167.js";import"https://static-s.gaiaworkforce.com/formPlatForm/umdjs/monaco/index.min.js";import"https://wizui-assets.oss-cn-hangzhou.aliyuncs.com/umd/arco.min.js";import"https://unpkg.com/react-dnd@14.0.5/dist/umd/ReactDnD.min.js";import"https://unpkg.com/react-dnd-html5-backend@14.0.2/dist/umd/ReactDnDHTML5Backend.min.js";import"https://unpkg.com/@arco-design/web-react@2.55.0/dist/arco.min.js";import"https://unpkg.com/@arco-design/web-react@2.55.0/dist/arco-icon.min.js";var n,D,P,j,A;function b(e,t,u,r){!u||Object.defineProperty(e,t,{enumerable:u.enumerable,configurable:u.configurable,writable:u.writable,value:u.initializer?u.initializer.call(r):void 0})}function B(e,t,u){return t=_(t),t in e?Object.defineProperty(e,t,{value:u,enumerable:!0,configurable:!0,writable:!0}):e[t]=u,e}function _(e){var t=K(e,"string");return typeof t=="symbol"?t:String(t)}function K(e,t){if(typeof e!="object"||e===null)return e;var u=e[Symbol.toPrimitive];if(u!==void 0){var r=u.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function p(e,t,u,r,o){var i={};return Object.keys(r).forEach(function(s){i[s]=r[s]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=u.slice().reverse().reduce(function(s,d){return d(e,t,s)||s},i),o&&i.initializer!==void 0&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),i.initializer===void 0&&(Object.defineProperty(e,t,i),i=null),i}const I=window.mobx.action,O=window.mobx.computed,C=window.mobx.observable;let R=(n=class{constructor(){b(this,"key",D,this),b(this,"setKey",P,this),b(this,"type",j,this),b(this,"setType",A,this),B(this,"getTableData",t=>c.post("/apijson/get",{"Menu[]":{query:2,count:0,Menu:f(l({},t),{classId:this.classId,"@order":"sort+","@column":["id","name","icon","sort","parentId","mode","isShow","isActive","path","componentPath","updatedAt"].join(",")})},"info@":"/Menu[]/info"}).then(u=>({list:u.Menu,total:u.info.total}))),B(this,"getDetail",t=>c.post("/apijson/get",{Menu:{id:t.id}}).then(u=>l({},u.Menu)))}get classId(){return w.appId?w.appId:this.type}},D=p(n.prototype,"key",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),P=p(n.prototype,"setKey",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{this.key=Math.random().toString(32)}}}),j=p(n.prototype,"type",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"system"}}),A=p(n.prototype,"setType",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.type=e}}}),p(n.prototype,"classId",[O],Object.getOwnPropertyDescriptor(n.prototype,"classId"),n.prototype),n);var a=new R;const y=window.arco.Message,L=window.arco.Modal,M=window.mobxReactLite.useObserver,z=window.React.useMemo,q=window.React.useRef,H=r=>{var o=r,{form:e,Field:t}=o,u=F(o,["form","Field"]);return M(()=>v(t,f(l({},u),{findParams:{classId:a.classId}}),a.key))},N=()=>({type:"object",title:"\u83DC\u5355",properties:{parentId:{type:"string",title:"\u4E0A\u7EA7\u83DC\u5355",colProps:{span:24},format:"treeSelector",fieldProps:{type:"menu"},widget:"ParentIdField",default:null},type:{type:"string",title:"\u83DC\u5355\u7C7B\u578B",colProps:{span:24},format:"radio",enum:[{label:"\u76EE\u5F55",value:"directory"},{label:"\u83DC\u5355",value:"menu"}],default:"directory"},icon:{type:"string",title:"\u83DC\u5355\u56FE\u6807",format:"icon",colProps:{span:24},default:null},name:{type:"string",title:"\u83DC\u5355\u540D\u79F0",maxLength:50,default:null},sort:{type:"integer",title:"\u6392\u5E8F",formItemProps:{title:"\u663E\u793A\u6392\u5E8F"},default:null},isLink:{type:"boolean",title:"\u662F\u5426\u5916\u94FE",formItemProps:{tooltip:"\u9009\u62E9\u662F\u5916\u94FE\u5219\u8DEF\u7531\u5730\u5740\u9700\u8981\u4EE5`http(s)://`\u5F00\u5934"},default:!1},path:{type:"string",title:"\u8DEF\u7531\u5730\u5740",maxLength:100,default:null},mode:{type:"string",title:"\u83DC\u5355\u7C7B\u578B",show:{type:"menu"},format:"radio",enum:[{label:"\u539F\u751F",value:"native",color:"green"},{label:"\u81EA\u5B9A\u4E49",value:"custom",color:"arcoblue"}],default:"native"},componentPath:{type:"string",title:"\u7EC4\u4EF6\u8DEF\u5F84\u5730\u5740",show:{"mode!":"custom",type:"menu"},default:null},pageId:{type:"number",title:"\u5173\u8054\u9875\u9762",show:{mode:"custom",type:"menu"},format:"selector",fieldProps:{type:"page",findParams:{}},default:null},isShow:{type:"boolean",title:"\u662F\u5426\u663E\u793A",format:"radio",enum:[{value:1,label:"\u663E\u793A",color:"blue"},{value:0,label:"\u9690\u85CF",color:"red"}],formItemProps:{tooltip:"\u5173\u95ED\u5219\u8DEF\u7531\u5C06\u4E0D\u4F1A\u51FA\u73B0\u5728\u4FA7\u8FB9\u680F\uFF0C\u4F46\u4ECD\u7136\u53EF\u4EE5\u8BBF\u95EE"},default:1},isActive:{type:"boolean",title:"\u83DC\u5355\u72B6\u6001",format:"radio",enum:[{value:1,label:"\u6B63\u5E38",color:"blue"},{value:0,label:"\u5173\u95ED",color:"red"}],formItemProps:{tooltip:"\u5173\u95ED\u5219\u8DEF\u7531\u5C06\u4E0D\u4F1A\u51FA\u73B0\u5728\u4FA7\u8FB9\u680F\uFF0C\u4E5F\u4E0D\u80FD\u88AB\u8BBF\u95EE"},default:1},updatedAt:{type:"string",format:"dateTime",title:"\u6700\u8FD1\u4E00\u6B21\u66F4\u65B0\u65F6\u95F4",default:null}},required:["name","path"]});var ie=()=>M(()=>{const e=q(),t=z(()=>[],[a.type]),u=z(()=>N(),[]);return v(T,{ref:e,schema:u,rowSelection:!0,treeBool:!0,className:"page-container",api:{find:s=>{var d=s,{pageSize:r,current:o}=d,i=F(d,["pageSize","current"]);return a.getTableData(i)},get:r=>a.getDetail(r),post:r=>c.post("/apijson/post",{Menu:f(l({},r),{classId:a.classId})}).then(()=>{y.success({content:"\u65B0\u589E\u6210\u529F"}),a.setKey()}),put:(r,o)=>r.parentId===o.id?(y.error("\u4E0A\u7EA7\u83DC\u5355\u4E0D\u80FD\u9009\u62E9\u81EA\u5DF1"),Promise.reject()):c.post("/apijson/put",{Menu:l({id:o.id},r)}).then(()=>{y.success({content:"\u66F4\u65B0\u6210\u529F"}),a.setKey()}),del:r=>new Promise((o,i)=>{L.confirm({title:`\u8BF7\u786E\u8BA4\u662F\u5426\u8981\u5220\u9664"${r.name}"?`,onOk:()=>c.post("/apijson/delete",{Menu:{id:r.id}}).then(s=>{y.success({content:"\u5220\u9664\u6210\u529F"}),a.setKey(),o(s)}).catch(i),onCancel:i})})},schemForm:{filterKeys:["parentId","type","icon","name","sort","isLink","path","mode","pageId","componentPath","isShow","isActive"],generagteProps:{cols:12,widgets:{ParentIdField:H}}},schemaTable:{pagination:!1,filterKeys:["name","icon","mode","sort","path","isShow","isActive","updatedAt"],headerTitle:t},queryForm:{filterKeys:["name","isActive"]}})});export{H as ParentIdField,ie as default,N as getSchema};

var x=Object.defineProperty;var y=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var I=(t,e,i)=>e in t?x(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,_=(t,e)=>{for(var i in e||(e={}))S.call(e,i)&&I(t,i,e[i]);if(y)for(var i of y(e))P.call(e,i)&&I(t,i,e[i]);return t};import{b}from"./hoc.faed4dd2.js";import{a as D,U as O}from"./index.716b61fb.js";import{a as h,j as a}from"./index.2e39aa0a.js";import"https://wizui-assets.oss-cn-hangzhou.aliyuncs.com/umd/arco.min.js";import"./vendor.1045acf8.js";import"./1d4eb3kqu.cb22cad3.js";import"./index.ab4c0410.js";import"https://static-s.gaiaworkforce.com/formPlatForm/umdjs/monaco/index.min.js";import"https://unpkg.com/react-dnd@14.0.5/dist/umd/ReactDnD.min.js";import"https://unpkg.com/react-dnd-html5-backend@14.0.2/dist/umd/ReactDnDHTML5Backend.min.js";import"https://unpkg.com/@arco-design/web-react@2.55.0/dist/arco.min.js";import"https://unpkg.com/@arco-design/web-react@2.55.0/dist/arco-icon.min.js";const B="_imgList_tpkae_1",M="_header_tpkae_1";var g={imgList:B,header:M,"waterfall-container":"_waterfall-container_tpkae_6","waterfall-item":"_waterfall-item_tpkae_13"},o,j,z,F,T,k,E;function l(t,e,i,s){!i||Object.defineProperty(t,e,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(s):void 0})}function L(t,e,i){return e=N(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function N(t){var e=R(t,"string");return typeof e=="symbol"?e:String(e)}function R(t,e){if(typeof t!="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var s=i.call(t,e||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function c(t,e,i,s,m){var r={};return Object.keys(s).forEach(function(u){r[u]=s[u]}),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=i.slice().reverse().reduce(function(u,n){return n(t,e,u)||u},r),m&&r.initializer!==void 0&&(r.value=r.initializer?r.initializer.call(m):void 0,r.initializer=void 0),r.initializer===void 0&&(Object.defineProperty(t,e,r),r=null),r}const w=window.mobx.action,v=window.mobx.observable;let q=(o=class{constructor(){l(this,"tagId",j,this),l(this,"setTagId",z,this),l(this,"list",F,this),l(this,"setList",T,this),L(this,"getList",()=>{b.post("/apijson/get",{"ImageList[]":{ImageList:{"@column":"id,name,url"}}}).then(e=>{this.setList(e.ImageList)})}),l(this,"tags",k,this),l(this,"setTags",E,this),L(this,"getTags",()=>{b.post("/apijson/get",{"ImageTag[]":{ImageTag:{"@column":"id, name"}}}).then(e=>{this.setTags(e.ImageTag)})})}},j=c(o.prototype,"tagId",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),z=c(o.prototype,"setTagId",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return t=>{this.tagId=t}}}),F=c(o.prototype,"list",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=c(o.prototype,"setList",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return t=>{this.list=t}}}),k=c(o.prototype,"tags",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=c(o.prototype,"setTags",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return t=>{this.tags=t}}}),o);var f=new q;const A=window.React.useEffect,C=window.React.useState,U=window.arco.Button,d=window.arco.Form,V=window.arco.Input,H=window.arco.Message,K=window.arco.Modal,G=window.arco.Space,J=window.arco.Tag,Q=window.arco.Image,W=window.mobxReact.useObserver,ce=()=>{const[t,e]=C(!1),[i]=d.useForm();return W(()=>{const{tagId:s,setTagId:m,tags:r,setTags:u}=f;return A(()=>{f.getTags(),f.getList()},[]),h("div",{className:g.imgList,children:[h("div",{className:g.header,children:[a(G,{size:"mini",style:{padding:16,paddingTop:0},children:r.map(n=>a(J,{checked:n.id===s,checkable:!0,onCheck:()=>{m(n.id)},color:"arcoblue",children:n.name},n.id))}),a(U,{type:"primary",onClick:()=>{i.clearFields(),e(!0)},children:"\u4E0A\u4F20\u56FE\u7247"})]}),a("div",{className:g["waterfall-container"],children:f.list.map(n=>a(Q,{className:g["waterfall-item"],preview:!0,src:n.url},n.id))}),a(K,{visible:t,style:{width:600},title:"\u4E0A\u4F20\u56FE\u7247",onCancel:()=>{e(!1)},onOk:()=>i.validate().then(n=>{b.post("/apijson/post",{ImageList:_({},n)}).then(()=>{H.success("\u4E0A\u4F20\u6210\u529F"),e(!1)})}),children:h(d,{form:i,children:[a(d.Item,{label:"\u8BF7\u9009\u62E9\u6807\u7B7E",field:"tagId",rules:[{required:!0}],children:a(D,{type:"imgTags"})}),a(d.Item,{label:"\u56FE\u7247\u540D\u79F0",field:"name",rules:[{required:!0}],children:a(V,{placeholder:"\u8BF7\u8F93\u5165"})}),a(d.Item,{label:"\u4E0A\u4F20\u56FE\u7247",field:"url",rules:[{required:!0}],children:a(O,{onChange:(n,p)=>{p&&i.setFieldsValue({name:p.name,size:p.size})}})}),a(d.Item,{field:"size",noStyle:!0})]})})]})})};export{ce as default};

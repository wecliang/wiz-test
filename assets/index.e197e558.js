var M=Object.defineProperty,j=Object.defineProperties;var S=Object.getOwnPropertyDescriptors;var l=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;var h=(e,t,n)=>t in e?M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,m=(e,t)=>{for(var n in t||(t={}))D.call(t,n)&&h(e,n,t[n]);if(l)for(var n of l(t))b.call(t,n)&&h(e,n,t[n]);return e},f=(e,t)=>j(e,S(t));import{e as P,g as $,d as w,l as x,f as z,h as g}from"./hoc.c733c82f.js";import{j as r,a as A}from"./index.cfc458ed.js";import"https://wizui-assets.oss-cn-hangzhou.aliyuncs.com/umd/arco.min.js";import"./vendor.96977194.js";import"https://unpkg.com/react-dnd@14.0.5/dist/umd/ReactDnD.min.js";import"https://unpkg.com/react-dnd-html5-backend@14.0.2/dist/umd/ReactDnDHTML5Backend.min.js";import"https://unpkg.com/@arco-design/web-react@2.55.0/dist/arco.min.js";import"https://unpkg.com/@arco-design/web-react@2.55.0/dist/arco-icon.min.js";function a(e,t,n){return t=E(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e){var t=O(e,"string");return typeof t=="symbol"?t:String(t)}function O(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class k{constructor(){a(this,"routes",[]),a(this,"pageMap",void 0),a(this,"fileMap",void 0),a(this,"history",void 0),a(this,"setRoutes",t=>{if(Array.isArray(t)){const n=P(t);this.routes=$(n,(o,s)=>{const{paths:i}=s||{};return f(m({},o),{paths:`${i?`${i}/`:"/"}${o.path}`})})}}),a(this,"getPageComponent",async t=>{const n=this.pageMap[t],o=await this.fileMap[n](),s=`createPage_${t.replace("-","")}`;return{default:o[s](w)}}),a(this,"init",async t=>{await x(t);const o=window.LowCodeRenderer(w),{menus:s,pageMap:i,fileMap:v,modules:u}=o;if(this.setRoutes(s),this.pageMap=i,this.fileMap=v,u)for(const d in u)z.mModules[d]=u[d]()})}}var c=new k;const C=window.React.lazy,H=window.React.useEffect,p=window.React.useMemo,I=window.React.useState,T=window.ReactRouterDOM.HashRouter,_=window.ReactRouterDOM.Switch,R=window.ReactRouterDOM.Route,K=window.ReactRouterDOM.Redirect,L=window.ReactRouterDOM.useHistory,B=localStorage.getItem("tenant");let y="https://wizui-assets.oss-cn-hangzhou.aliyuncs.com/resource/"+B;g.loadCSS(`${y}/app.css`);function F(e){const t=[];function n(o){o.forEach(s=>{Array.isArray(s.children)&&s.children.length&&n(s.children),s.pageId&&s.isActive==1&&(c.pageMap[s.pageId]?s.component=C(()=>c.getPageComponent(s.pageId)):s.component=()=>r("span",{}),t.push(s))})}return n(e),t}const N=()=>{const e=p(()=>F(c.routes),[]);g.history=L();const t=p(()=>e.length?e[0].paths:"/",[e]),n=p(()=>e.map((o,s)=>r(R,{path:o.paths,component:o.component},s)),[e]);return A(_,{children:[n,r(R,{exact:!0,path:"/",children:r(K,{to:t})})]})};var Z=()=>{const[e,t]=I(!1);return H(()=>{c.init(`${y}/app.js?t=${Date.now()}`).then(()=>{t(!0)})},[]),e?r(T,{basename:"/run",children:r(N,{})}):null};export{Z as default};
